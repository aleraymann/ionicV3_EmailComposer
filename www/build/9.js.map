{"version":3,"sources":["../../src/pages/finantial/finantial.module.ts","../../src/pages/finantial/finantial.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { FinantialPage } from './finantial';\n\n@NgModule({\n  declarations: [\n    FinantialPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(FinantialPage),\n  ],\n})\nexport class FinantialPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/finantial/finantial.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport { HomePage } from '../home/home';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { EmailComposer } from '@ionic-native/email-composer';\nimport firebase from 'firebase';\n\n/**\n * Generated class for the FinantialPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-finantial',\n  templateUrl: 'finantial.html',\n})\nexport class FinantialPage {\n  Patients;\n  totalReceive = 0;\n  received = 0;\n  toReceive = 0;\n\n  usuario:any;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public http: Http,\n    public alertCtrl: AlertController,\n    public db: AngularFireDatabase,\n    public toastCtrl: ToastController,\n    private emailComposer: EmailComposer\n  ) {\n    this.Patients = [];\n    this.usuario = firebase.auth().currentUser;\n    console.log(this.usuario.email);\n    this.emailComposer.isAvailable().then((available: boolean) =>{\n      if(available) {\n        //Now we know we can send\n      }\n     });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad FinantialPage');\n    this.getPatients();\n  }\n  goPatient() {\n    this.navCtrl.push('PatientPage');\n  }\n  goHome() {\n    this.navCtrl.push(HomePage);\n  }\n  getPatients() {\n    this.http.get('https://agendapp-6daf1.firebaseio.com/patients.json')\n      .map(res => res.json())\n      .subscribe(data => {\n        if (data !== null && data !== undefined) {\n          this.ShowPatients(data);\n        }\n      })\n  }\n  //--------------------------------------------------SHOW_PATIENTS\n  ShowPatients(data) {\n    this.Patients = Object.keys(data).map(i => {\n      data[i]._i = i;\n      this.totalReceive = this.totalReceive += parseFloat(data[i].value_payment);\n      //console.log(this.totalReceive);\n      if (data[i].payment != false) {\n        this.received = this.received += parseFloat(data[i].value_payment);\n        //console.log(this.received);\n      } else {\n        this.toReceive = this.totalReceive - this.received;\n      }\n      //console.log(this.toReceive);\n      return data[i];\n    });\n  }\n  //--------------------------------------------------Restart Finantial\n  restartFinancial(payment) {\n    const confirm = this.alertCtrl.create({\n      title: 'Zerar Financeiro',\n      buttons: [\n        {\n          text: 'Cancelar',\n          handler: () => {\n            console.log('Cancelar Clicado');\n          }\n        },\n        {\n          text: 'Confirmar',\n          handler: () => {\n\n            this.http.get('https://agendapp-6daf1.firebaseio.com/patients.json')\n              .map(res => res.json())\n              .subscribe(data => {\n                this.Patients = Object.keys(data).map(i => {\n                  data[i]._i = i;\n                  if (data !== null && data !== undefined) {\n                    this.db.database.ref('patients/' + i).update({\n                      payment: false\n                    })\n                  }\n                })\n              })\n            this.navCtrl.push('HomePage');\n            const toast = this.toastCtrl.create({\n              message: 'Financeiro Zerado',\n              duration: 3000\n            });\n            toast.present();\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n  send(){\n    this.navCtrl.push(\"EmailSendPage\");\n  }\n\n  /*send(){\n    let email = {\n      to: this.usuario.email,\n      cc: '',\n      bcc: [],\n      attachments: [],\n      subject: 'Relat√≥rio Mensal',\n      body:  '',\n      isHtml: true,\n      app: 'gmail'\n    };\n    // Send a text message using default options\n    this.emailComposer.open(email);\n  }*/\n  \n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/finantial/finantial.ts"],"sourceRoot":""}