{"version":3,"sources":["../../src/pages/email-send/email-send.module.ts","../../src/pages/email-send/email-send.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EmailSendPage } from './email-send';\n\n@NgModule({\n  declarations: [\n    EmailSendPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EmailSendPage),\n  ],\n})\nexport class EmailSendPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/email-send/email-send.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, ToastController } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { EmailComposer } from '@ionic-native/email-composer';\nimport firebase from 'firebase';\n\n/**\n * Generated class for the EmailSendPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-email-send',\n  templateUrl: 'email-send.html',\n})\nexport class EmailSendPage {\n  Patients;\n  totalReceive = 0;\n  received = 0;\n  toReceive = 0;\n\n  usuario:any;\n  result;\n\n  subject:\"\";\n  body:\"\";\n \n  \n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public http: Http,\n    public alertCtrl: AlertController,\n    public db: AngularFireDatabase,\n    public toastCtrl: ToastController,\n    private emailComposer: EmailComposer\n  ) {\n    this.Patients = [];\n\n    this.result = JSON.stringify(this.Patients);\n    console.log(this.result);\n\n    this.usuario = firebase.auth().currentUser;\n    console.log(this.usuario.email);\n    this.emailComposer.isAvailable().then((available: boolean) =>{\n      if(available) {\n        //Now we know we can send\n      }\n     });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad EmailSendPage');\n    this.getPatients();\n  }\n  \n  getPatients() {\n    this.http.get('https://agendapp-6daf1.firebaseio.com/patients.json')\n      .map(res => res.json())\n      .subscribe(data => {\n        if (data !== null && data !== undefined) {\n          this.ShowPatients(data);\n        }\n      })\n  }\n  //--------------------------------------------------SHOW_PATIENTS\n  ShowPatients(data) {\n    this.Patients = Object.keys(data).map(i => {\n      data[i]._i = i;\n      this.totalReceive = this.totalReceive += parseFloat(data[i].value_payment);\n      //console.log(this.totalReceive);\n      if (data[i].payment != false) {\n        this.received = this.received += parseFloat(data[i].value_payment);\n        //console.log(this.received);\n      } else {\n        this.toReceive = this.totalReceive - this.received;\n      }\n      //console.log(this.toReceive);\n      return data[i];\n    });\n  }\n\n  send(){\n    let email = {\n      to: this.usuario.email,\n      cc: '',\n      bcc: [],\n      attachments: [],\n      subject: 'Relatório do mês de '+ this.subject,\n      body:  this.body,\n      isHtml: true,\n      app: 'gmail'\n    };\n    // Send a text message using default options\n    this.emailComposer.open(email);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/email-send/email-send.ts"],"sourceRoot":""}